<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drag and Drop Icons</title>
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
            font-family: Arial, sans-serif;
        }

        #icon-container {
            margin: 20px;
            display: flex;
            justify-content: space-between;
            width: 250px;
        }

        .icon {
            width: 50px;
            height: 50px;
            cursor: grab;
        }

        #container {
            position: relative;
            width: 80vw;
            height: 400px;
            border: 2px dashed #000;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #drop-area {
            width: 100px;
            height: 100px;
            background-color: #ddd;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            position: relative;
        }
    </style>
</head>
<body>

    <!-- Original Icon Containers -->
    <div id="icon-container">
        <img src="https://cdn-icons-png.flaticon.com/512/25/25694.png" id="draggable-icon-1" class="icon" draggable="true">
        <img src="static/images/fav.png" id="draggable-icon-2" class="icon" draggable="true">
    </div>

    <!-- Drop Area -->
    <div id="container">
        <div id="drop-area">Drop Here</div>
    </div>

    <script>
        const icons = document.querySelectorAll('.icon');
        const dropArea = document.getElementById("drop-area");
            
        // Handle drag start for original icons
        icons.forEach((icon) => {
            icon.addEventListener("dragstart", (event) => {
                event.dataTransfer.setData("iconID", event.target.id);
            });
        });
        
        dropArea.addEventListener("dragover", (event) => {
            event.preventDefault();
            dropArea.style.backgroundColor = "#c0ffc0";
        });
        
        dropArea.addEventListener("dragleave", () => {
            dropArea.style.backgroundColor = "#ddd";
        });
        
        dropArea.addEventListener("drop", (event) => {
            event.preventDefault();
            dropArea.style.backgroundColor = "#ddd";
        
            const iconID = event.dataTransfer.getData("iconID");
            const draggedIcon = document.getElementById(iconID);
        
            // if (!draggedIcon) return;
        
            // Clone the dragged icon
            const newIcon = draggedIcon.cloneNode(true);
            newIcon.removeAttribute("id"); // Remove ID to avoid duplication
            newIcon.style.position = "relative";
            newIcon.style.cursor = "grab";
            newIcon.setAttribute("draggable", true);
        
            // Clear previous content and add the new icon
            dropArea.innerHTML = "";
            dropArea.appendChild(newIcon);
        
            // Make the cloned icon draggable
            newIcon.addEventListener("dragstart", (event) => {
                event.dataTransfer.setData("iconID", "cloned-icon");
            });
        
            // Detect when dragged outside the drop area and remove the icon
            document.addEventListener("dragover", (event) => {
                const rect = dropArea.getBoundingClientRect();
                if (
                    event.clientX < rect.left ||
                    event.clientX > rect.right ||
                    event.clientY < rect.top ||
                    event.clientY > rect.bottom
                ) {
                    newIcon.remove(); // Remove icon if dragged out
                    dropArea.innerHTML = "Drop Here"; // Reset drop area text
                }
            });
        });
        
    </script>

</body>
</html>
